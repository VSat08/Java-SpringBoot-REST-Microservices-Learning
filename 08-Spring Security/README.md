# 08 - Spring Security

## Introduction

Welcome to *08 - Spring Security*

This section introduces you to securing your Spring Boot REST APIs using Spring Security. Whether you're new to coding or building on previous knowledge, this roadmap will guide you through securing APIs, managing users and roles, and protecting resources. Weâ€™ll explore authentication, authorization, and database integration for secure appsâ€”making your REST APIs safe and robust! Letâ€™s get started! ðŸ”’

---

## Table of Contents

1. [What Is Spring Security?](#1-what-is-spring-security)
   - [1.1 Definition and Purpose](#11-definition-and-purpose)
   - [1.2 Why Spring Security Matters](#12-why-spring-security-matters)
   - [1.3 How Spring Security Works](#13-how-spring-security-works)
   - [1.4 Servlet Filters in Security](#14-servlet-filters-in-security)
   - [1.5 Key Terms for Beginners](#15-key-terms-for-beginners)
2. [Learning Roadmap](#2-learning-roadmap)
   - [2.1 Understanding Spring Security Basics](#21-understanding-spring-security-basics)
   - [2.2 Defining Users and Roles](#22-defining-users-and-roles)
   - [2.3 Protecting URLs Based on Roles](#23-protecting-urls-based-on-roles)
   - [2.4 Storing Users and Passwords in a Database](#24-storing-users-and-passwords-in-a-database)
   - [2.5 Encrypting Passwords and Custom Tables](#25-encrypting-passwords-and-custom-tables)
3. [What Youâ€™ll Build](#3-what-youll-build)
- [3.1 Setting Up Spring Security in Spring Boot](#31-setting-up-spring-security-in-spring-boot)
   - [3.2 Demo: Securing a REST API](#32-demo-securing-a-rest-api)
4. [Upcoming Sessions](#4-upcoming-sessions)
5. [Next Steps](#5-next-steps)

---

## 1. What Is Spring Security?

### 1.1 Definition and Purpose

Spring Security is a powerful framework for securing Spring-based applications, including REST APIs.

- *Definition*: A customizable authentication and authorization framework built into Spring Boot.
- *Purpose*: Protects web resources (e.g., URLs, APIs) by ensuring only authenticated and authorized users can access them.
- *How*: Uses servlet filters to preprocess requests and enforce security logicâ€”no need to write low-level code.

#### Real-World Analogy

Spring Security is like a bouncer at a clubâ€”checking IDs (authentication) and VIP lists (authorization) before letting you in.

### 1.2 Why Spring Security Matters

- *Ease*: Simplifies security with minimal configurationâ€”handles authentication and authorization out of the box.
- *Flexibility*: Supports multiple authentication methods (in-memory, database, LDAP, etc.).
- *Scalability*: Secures simple apps or complex microservices with role-based access control.
- *Integration*: Built into Spring Bootâ€”ready to use with REST APIs and MVC apps.
- *Safety*: Protects against common threats (e.g., unauthorized access, brute force attacks).

#### Example Benefit

Secure a /admin endpoint so only users with an "ADMIN" role can access itâ€”no manual checks needed.

### 1.3 How Spring Security Works

- *Core Concept*: Intercepts web requests via servlet filters, processes security logic, and routes or denies access.
- *Flow*:
  1. Request arrives (e.g., from a browser or Postman).
  2. Filters check if the resource is protected.
  3. If protected, verify authentication (e.g., username/password).
  4. If authenticated, check authorization (e.g., role-based privileges).
  5. Grant or deny access accordingly.
- *Configuration*: Defined in application.properties or custom security classes.

#### Visual Flow


Client â†’ Request â†’ Spring Security Filters â†’ [Authenticated?] â†’ [Authorized?] â†’ Resource or Deny


### 1.4 Servlet Filters in Security

- *What*: Servlet filters are Java components that preprocess or post-process web requests.
- *Role in Spring Security*: Underpin the frameworkâ€”automatically applied to intercept requests.
- *Function*:
  - Check if a resource is public or protected.
  - Redirect unauthenticated users to a login form (auto-generated by Spring).
  - Route requests based on security logic (e.g., role checks).
- *Benefit*: You configure security rulesâ€”Spring handles the filter plumbing.

>[!NOTE]
>Servlet filters = the hidden engine of Spring Security!

### 1.5 Key Terms for Beginners

Your newbie glossary:

| Term            | Meaning                                   | Example                  |
|-----------------|-------------------------------------------|--------------------------|
| *Spring Security* | Framework for securing Spring apps    | Protects REST APIs       |
| *Authentication* | Verifying user identity                | Username/password login  |
| *Authorization* | Checking user privileges                | Role-based access        |
| *Servlet Filter* | Pre/post-processes web requests         | Security logic enforcer  |
| *Protected Resource* | Restricted URL/API                  | /admin endpoint        |
| *Role*        | User privilege level                     | USER, ADMIN          |
| *Configuration* | Security settings                       | application.properties |

---

## 2. Learning Roadmap

Your path to mastering Spring Security over the next 4-5 sessions!

### 2.1 Understanding Spring Security Basics

- *What Youâ€™ll Learn*: Core conceptsâ€”authentication, authorization, and servlet filters.
- *Goal*: Grasp how Spring Security secures REST APIs with minimal effort.

### 2.2 Defining Users and Roles

- *What Youâ€™ll Learn*: Setting up users and roles (e.g., in-memory or custom).
- *Goal*: Assign privileges to control who accesses what.

#### Example

- User: john with role USER.
- User: admin with role ADMIN.

### 2.3 Protecting URLs Based on Roles

- *What Youâ€™ll Learn*: Restricting API endpoints by role (e.g., /admin for ADMIN only).
- *Goal*: Secure resources with role-based access control.

### 2.4 Storing Users and Passwords in a Database

- *What Youâ€™ll Learn*: Moving user data from memory to a database (e.g., MySQL).
- *Goal*: Persist users and roles for real-world apps.

### 2.5 Encrypting Passwords and Custom Tables

- *What Youâ€™ll Learn*: Encrypting passwords and creating custom user tables.
- *Goal*: Enhance security with encrypted storage and tailored schemas.

---

## 3. What Youâ€™ll Build

Youâ€™ll secure a Spring Boot REST API, starting with setup and a hands-on demo.

### 3.1 Setting Up Spring Security in Spring Boot

- *Tools*: Spring Boot project with Spring Security dependency.
- *Steps*:
  1. Add spring-boot-starter-security to pom.xml.
  2. Configure basic security in application.properties (e.g., default user/password).
  3. Test with a REST client (e.g., Postman).
- *Outcome*: A secured app with a default login form.

>[!TIP]
>spring-boot-starter-security = instant security for your app!

### 3.2 Demo: Securing a REST API

Letâ€™s secure a sample API with users and roles!

#### Steps

1. *Create a Simple API*:
   - Endpoint: /hello (public), /admin (protected).
2. *Define Users*:
   - In application.properties:
     
     spring.security.user.name=admin
     spring.security.user.password=pass123
     spring.security.user.roles=ADMIN
     
3. *Protect URLs*:
   - Configure /admin to require ADMIN role.
4. *Test*:
   - Access /hello â†’ Works for all.
   - Access /admin â†’ Login required â†’ Success with admin/pass123.

#### Outcome

- Public endpoint: Accessible to all.
- Protected endpoint: Restricted to authenticated ADMIN users.

>[!NOTE]
>Your APIâ€™s now locked downâ€”next, scale it up!

---

## 4. Upcoming Sessions

Your learning journey over the next few sessionsâ€”build your security skills step-by-step!

| Session Title                        | Chapters | What Youâ€™ll Learn                                      |
|--------------------------------------|----------|-------------------------------------------------------|
| *REST API Basic Security Configuration*            | 8.1      | Define users and roles in-memory and assign privileges. |
| *Spring Security User Accounts Stored DB*        | 8.2      | Secure API endpoints with role-based access control.  |
| *Spring Security Password Encryption*            | 8.3      | Store users and roles in a database (e.g., MySQL).     |
| *Spring Security Custom Tables* | 8.4   | Encrypt passwords and design custom user schemas.     |

>[!TIP]
>Each session adds a layer of securityâ€”your APIs will be Fort Knox soon!

---

## 5. Next Steps

- Start with "Users and Roles Setup"â€”configure your first secure users.
- Explore role-based protection, database integration, and encryption in upcoming sessions.

>[!TIP]
>Your REST APIs are about to become bulletproofâ€”keep going!

---
